<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>E-Commerce Pro ‚Äì Savons Naturels</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        /* Arri√®re-plan vert + jaune + rouge */
    
   body {
    background: url('images/ariere-plan.jpeg') no-repeat center center;
    background-size: cover;
    min-height: 100vh;
    font-family: Arial, sans-serif;
}
/* Cartes produits */
.product-card {
    background: white;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    transition: transform 0.3s;
    overflow: hidden; /* important pour le carr√© */
}

.product-card:hover {
    transform: scale(1.03);
}

/* Images (PC & tablette) */
.product-card img {
    width: 100%;
    height: 200px;
    object-fit: cover;
}

/* üì± T√©l√©phone : images carr√©es */
@media (max-width: 576px) {
    .product-card img {
        height: auto;
        aspect-ratio: 1 / 1; /* üî• carr√© parfait */
    }

    .product-card h6 {
        font-size: 13px;
    }

    .price {
        font-size: 12px;
    }

    .btn {
        font-size: 14px;
        padding: 8px;
    }
}

        /* Logo */
        .logo {
            font-size: 26px;
            font-weight: bold;
            color: white;
        }

       

        .price {
            color: green;
            font-weight: bold;
            font-size: 18px;
        }

        .search-bar {
            max-width: 500px;
            margin: 20px auto;
        }
        @media (max-width: 576px) {
    .logo {
        font-size: 20px;
    }

   
}
@media (max-width: 576px) {
    .search-bar {
        padding: 0 10px;
    }
}
.modal-dialog {
    margin: 10px;
}



    </style>
</head>

<body>
  <div id="mainContent">
    
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container d-flex flex-wrap gap-2">

        <span class="logo"> Mandela.com</span>
    
         <button class="btn btn-warning ms-auto" data-bs-toggle="modal" data-bs-target="#cartModal">
    üõí Panier (<span id="cartCount">0</span>)
</button>

        
         <button class="btn btn-outline-light ms-2" data-bs-toggle="modal" data-bs-target="#accountModal">
    üë§ Mon compte
</button>

</nav>

<div id="categoryMenu" class="dropdown-menu">
    <a class="dropdown-item" data-section="savon">üßº Savon</a>
    <a class="dropdown-item" data-section="montre">‚åö Montre</a>
    <a class="dropdown-item" data-section="vetement">üëï V√™tements</a>
    <a class="dropdown-item" data-section="telephones"> üì±telephones</a>
    <a class="dropdown-item" data-section="chargeurs">üîå chargeurs</a>
</div>


    </div>
</nav>
  

<!-- BARRE DE RECHERCHE -->
<div class="container search-bar">
    <input type="text" id="searchInput" class="form-control" placeholder="Rechercher un savon...">
</div>

<!-- PRODUITS -->
 <div id="section-SAVONS">
<div class="container mt-5 mb-5">

    <h3 class="fw-bold text-center text-dark mb-4">
       üßº  DES SAVONS
    </h3>

    <div class="row">

<div class="container mb-5" id="section-savon">
    <div class="row" id="productList">
      


        <!-- PRODUIT TEMPLATE -->
        <script>
const products = [
     { name: "Savon Aloe Vera", price: 2000, img: "images/im1.jpeg" },
    { name: "Savon Miel", price: 2100, img: "images/im2.jpeg" },
    { name: "Savon Karit√©", price: 2200, img: "images/im3.jpeg" },
    { name: "Savon Citron", price: 2300, img: "images/im4.jpeg" },
    { name: "Savon Lavande", price: 2400, img: "images/im5.jpeg" },
    { name: "Savon Charbon", price: 2500, img: "images/im6.jpeg" },
    { name: "Savon Neem",price: 2200, img: "images/im7.jpeg" },
    { name: "Savon Curcuma",price: 2200, img: "images/im8.jpeg" },
    { name: "Savon Menthe",price: 2200, img: "images/im9.jpeg" },
    { name: "Savon Coco",price: 2200, img: "images/im10.jpeg" },
    { name: "Savon Gingembre",price: 2200, img: "images/im12.jpeg" },
  
    
];
const productList = document.getElementById("productList");
let cart = [];

/* üî¥ AFFICHAGE DES PRODUITS + BOUTON */
products.forEach(product => {
    productList.innerHTML += `
        <div class="col-4 col-md-4 col-lg-3 mb-4">
            <div class="product-card">
                <img src="${product.img}" alt="${product.name}">
                <div class="p-3">
                    <h6 class="product-name">${product.name}</h6>
                    <p>Savon naturel bio.</p>
                    <p class="price">${product.price} FCFA</p>

                    <!-- ‚úÖ LE BOUTON EST ICI -->
                    <button class="btn btn-success w-100"
                        onclick='addToCart(${JSON.stringify(product)})'>
                        Ajouter au panier
                    </button>
                </div>
            </div>
        </div>
    `;
});

/* üõí PANIER */



function addToCart(product) {
    const existing = cart.find(item => item.name === product.name);
    if (existing) {
        existing.qty++;
    } else {
        cart.push({ ...product, qty: 1 });
    }
    updateCart();
    

}

function increaseQty(i) { cart[i].qty++; updateCart(); }
function decreaseQty(i) {
    cart[i].qty > 1 ? cart[i].qty-- : cart.splice(i,1);
    updateCart();
}
function removeFromCart(i) { cart.splice(i,1); updateCart(); }

function updateCart() {
    const cartItems = document.getElementById("cartItems");
    const cartTotal = document.getElementById("cartTotal");
    const cartCount = document.getElementById("cartCount");

    cartItems.innerHTML = "";
    let total = 0, count = 0;

    cart.forEach((item, i) => {
        total += item.price * item.qty;
        count += item.qty;
        cartItems.innerHTML += `
            <div class="d-flex justify-content-between mb-2">
                <div>${item.name} (${item.qty})</div>
                <div>
                    <button class="btn btn-sm btn-success" onclick="increaseQty(${i})">+</button>
                    <button class="btn btn-sm btn-warning" onclick="decreaseQty(${i})">‚àí</button>
                    <button class="btn btn-sm btn-danger" onclick="removeFromCart(${i})">‚ùå</button>
                </div>
            </div>
        `;
    });

    cartTotal.textContent = total;
    cartCount.textContent = count;

    


}
</script>

<!-- JAVASCRIPT RECHERCHE -->
<script>
    const searchInput = document.getElementById("searchInput");
    const productsItems = document.querySelectorAll(".product-item");

    searchInput.addEventListener("keyup", function () {
        const value = this.value.toLowerCase();

        productsItems.forEach(item => {
            const name = item.querySelector(".product-name").textContent.toLowerCase();
            item.style.display = name.includes(value) ? "block" : "none";
        });
    });
</script>

<!-- MODAL PANIER -->
<div class="modal fade" id="cartModal" tabindex="-1">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">üõí Mon Panier</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        <div id="cartItems"></div>
        <hr>
        <h5>Total : <span id="cartTotal">0</span> FCFA</h5>
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
       <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#orderModal">Commander</button>

      </div>
    </div>
  </div>
</div>
<!-- MODAL MON COMPTE -->
<div class="modal fade" id="accountModal" tabindex="-1">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">üë§ Mon compte</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        <p><strong>Utilisateur :</strong> <span id="accountUser"></span></p>
        <hr>

        <h6>üì¶ Mes commandes</h6>
        <div id="accountOrders"></div>

        <hr>
        <button class="btn btn-danger" onclick="clearOrders()">üóëÔ∏è Vider ma bo√Æte</button>
      </div>

    </div>
  </div>
</div>


<!-- MODAL FORMULAIRE DE COMMANDE -->
<div class="modal fade" id="orderModal" tabindex="-1">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">üì¶ Informations de Livraison</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form id="orderForm">
          <div class="mb-3">
            <label for="prenom" class="form-label">Pr√©nom</label>
            <input type="text" id="prenom" class="form-control" required>
          </div>
          <div class="mb-3">
            <label for="nom" class="form-label">Nom</label>
            <input type="text" id="nom" class="form-control" required>
          </div>
          <div class="mb-3">
            <label for="adresse" class="form-label">Adresse de livraison</label>
            <input type="text" id="adresse" class="form-control" required>
          </div>
          <div class="mb-3">
            <label for="telephone" class="form-label">Num√©ro de t√©l√©phone</label>
            <input type="tel" id="telephone" class="form-control" required>
          </div>
          <button type="submit" class="btn btn-success w-100">Valider la commande</button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- MODAL CONFIRMATION DE PAIEMENT -->
<div class="modal fade" id="paymentModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">üí≥ Paiement requis</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <p>
          Nous vous prions de faire votre paiement sur Wave via ce num√©ro : <strong>78 287 58 37</strong> 
          pour que nous puissions livrer vos produits √† temps. payer avec le numero de t√©l√©phone que vous avait utiliser pour la commande .
        </p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Non</button>
        <button type="button" class="btn btn-success" id="confirmPayment">OK</button>
      </div>
    </div>
  </div>
</div>
<script>
const currentUser = sessionStorage.getItem("clientLoggedIn");

if (!currentUser) {
    alert("Vous devez √™tre connect√© pour commander");
    window.location.href = "login.html";
}
</script>


<script>
const orderForm = document.getElementById("orderForm");

let whatsappURL = ""; // on stocke l'URL WhatsApp pour le bouton OK

orderForm.addEventListener("submit", function(e) {
    e.preventDefault();

    const prenom = document.getElementById("prenom").value;
    const nom = document.getElementById("nom").value;
    const adresse = document.getElementById("adresse").value;
    const telephone = document.getElementById("telephone").value;

    if(cart.length === 0){
        alert("Votre panier est vide !");
        return;
    }

    // G√©n√©rer la liste des produits
    const produitText = cart.map(item => `${item.name} x${item.qty}`).join(", ");
    const total = cart.reduce((sum, item) => sum + item.price * item.qty, 0);

    // Ajouter la commande dans la bo√Æte ‚ÄúMes commandes‚Äù
    let orders = JSON.parse(localStorage.getItem("orders") || "{}");
    if(!orders[currentUser]) orders[currentUser] = [];
    orders[currentUser].push({
        items: produitText,
        total: total,
        date: new Date().toLocaleString()
    });
    localStorage.setItem("orders", JSON.stringify(orders));

    // Pr√©parer WhatsApp
    whatsappURL = `https://wa.me/221782875837?text=${encodeURIComponent(
        `Bonjour, je souhaite commander les produits suivants :\nProduits : ${produitText}\nTotal : ${total} FCFA\nNom : ${prenom} ${nom}\nAdresse : ${adresse}\nT√©l√©phone : ${telephone}`
    )}`;

    const paymentModal = new bootstrap.Modal(document.getElementById('paymentModal'));
    paymentModal.show();
});


// Redirection vers WhatsApp quand l'utilisateur clique sur OK
document.getElementById("confirmPayment").addEventListener("click", function() {
    if(whatsappURL) {
        window.open(whatsappURL, "_blank");
    }
    // fermer le modal
    const paymentModalEl = document.getElementById('paymentModal');
    const modal = bootstrap.Modal.getInstance(paymentModalEl);
    modal.hide();
});
</script>

<script>
function loadAccountBox() {
    const user = currentUser;
    document.getElementById("accountUser").textContent = user;

    const orders = JSON.parse(localStorage.getItem("orders") || "{}");
    const userOrders = orders[user] || [];

    const box = document.getElementById("accountOrders");
    box.innerHTML = "";

    if(userOrders.length === 0){
        box.innerHTML = "<p>Aucune commande enregistr√©e.</p>";
        return;
    }

    userOrders.forEach((order, index) => {
        box.innerHTML += `
            <div class="border rounded p-2 mb-2">
                <strong>Commande ${index + 1}</strong><br>
                ${order.items}<br>
                <strong>Total :</strong> ${order.total} FCFA<br>
                <small>${order.date}</small>
            </div>
        `;
    });
}

// Charger quand le modal s‚Äôouvre
document.getElementById("accountModal").addEventListener("show.bs.modal", loadAccountBox);

// Vider les commandes
function clearOrders(){
    let orders = JSON.parse(localStorage.getItem("orders") || "{}");
    orders[currentUser] = [];
    localStorage.setItem("orders", JSON.stringify(orders));
    loadAccountBox();
}
</script>

<script>
function logout() {
  sessionStorage.removeItem("clientLoggedIn");
  window.location.href = "login.html";
}
</script>
<script>
if (!sessionStorage.getItem("clientLoggedIn")) {
    window.location.href = "login.html";
}
</script>


<!-- ================= SECTION MONTRES ================= -->
 <div id="section-montres">
<div class="container mt-5 mb-5">

    <h3 class="fw-bold text-center text-dark mb-4">
        ‚åö MONTRES
    </h3>

    <div class="row">

        <script>
        const montres = [
            { name: "Montre Classique", price: 12000, img: "montres/a.jpeg" },
            { name: "Montre Homme Luxe", price: 15000, img: "montres/b.jpeg" },
            { name: "Montre Femme √âl√©gante", price: 13000, img: "montres/c.jpeg" },
            { name: "Montre Sport", price: 11000, img: "montres/d.jpeg" },
            { name: "Montre Digitale", price: 10000, img: "montres/e.jpeg" },
            { name: "Montre Enfant", price: 8000, img: "montres/f.jpeg" },
            { name: "Montre Bracelet Cuir", price: 14000, img: "montres/g.jpeg" },
            { name: "Montre Bracelet M√©tal", price: 16000, img: "montres/h.jpeg" },
            { name: "Montre √âtanche", price: 17000, img: "montres/i.jpeg" },
            { name: "Montre Moderne", price: 12500, img: "montres/j.jpeg" },
            { name: "Montre Simple", price: 9000, img: "montres/k.jpeg" },
            { name: "Montre Business", price: 15500, img: "montres/l.jpeg" }
        ];

        montres.forEach(montre => {
            document.write(`
                  <div class="col-4 col-md-4 col-lg-3 mb-4">
                    <div class="product-card">
                        <img src="${montre.img}" alt="${montre.name}">
                        <div class="p-3">
                            <h6>${montre.name}</h6>
                            <p class="price">${montre.price} FCFA</p>
                            <button class="btn btn-success w-100"
                                onclick='addToCart(${JSON.stringify(montre)})'>
                                Ajouter au panier
                            </button>
                        </div>
                    </div>
                </div>
            `);
        });
        </script>

    </div>
</div>
</div>
<!-- ================= FIN SECTION MONTRES ================= -->

<!-- ================= SECTION V√äTEMENTS ================= -->
 <div id="section-vetements">
<div class="container mt-5 mb-5">

    <h3 class="fw-bold text-center text-dark mb-4">
        üëï V√äTEMENTS HOMME & FEMME
    </h3>

    <div class="row">

        <script>
        const vetements = [
            { name: "T-shirt Homme", price: 7000, img: "vetements/aa.jpeg" },
            { name: "Robe Femme", price: 12000, img: "vetements/bb.jpeg" },
            { name: "Chemise Homme", price: 9000, img: "vetements/cc.jpeg" },
            { name: "Jean Femme", price: 11000, img: "vetements/dd.jpeg" },
            { name: "Polo Homme", price: 8000, img: "vetements/ee.jpeg" },
            { name: "Jupe Femme", price: 9500, img: "vetements/ff.jpeg" },
            { name: "Veste Homme", price: 15000, img: "vetements/gg.jpeg" },
            { name: "Blouse Femme", price: 8500, img: "vetements/hh.jpeg" },
            { name: "Surv√™tement", price: 14000, img: "vetements/ii.jpeg" },
            { name: "Robe Longue", price: 16000, img: "vetements/jj.jpeg" },
            { name: "Short Homme", price: 6500, img: "vetements/kk.jpeg" },
            { name: "Pantalon Femme", price: 10000, img: "vetements/ll.jpeg" },
            { name: "T-shirt Femme", price: 7500, img: "vetements/mm.jpeg" },
            { name: "Pull Homme", price: 13000, img: "vetements/nn.jpeg" },
            { name: "Tenue Mixte", price: 17000, img: "vetements/oo.jpeg" }
        ];

        vetements.forEach(vetement => {
            document.write(`
                <div class="col-4 col-md-4 col-lg-3 mb-4">
                    <div class="product-card">
                        <img src="${vetement.img}" alt="${vetement.name}">
                        <div class="p-3">
                            <h6>${vetement.name}</h6>
                            <p class="price">${vetement.price} FCFA</p>
                            <button class="btn btn-success w-100"
                                onclick='addToCart(${JSON.stringify(vetement)})'>
                                Ajouter au panier
                            </button>
                        </div>
                    </div>
                </div>
            `);
        });
        </script>

    </div>
</div>
</div>
<!-- ================= FIN SECTION V√äTEMENTS ================= -->
 <!-- ================= SECTION TELEPHONES ================= -->
<div id="section-telephones">
  <div class="container mt-5 mb-5">
    <h3 class="fw-bold text-center text-dark mb-4">
      üì± T√âL√âPHONES
    </h3>

    <div class="row">

      <script>
      const telephones = [
        // 4 Tecno
        { name: "Tecno Spark 10", price: 70000, img: "telephones/aaa.jpeg" },
        { name: "Tecno Camon 20", price: 90000, img: "telephones/bbb.jpeg" },
        { name: "Tecno Pouvoir 5", price: 80000, img: "telephones/ccc.jpeg" },
        { name: "Tecno Phantom X", price: 120000, img: "telephones/ddd.jpeg" },
        // 4 Samsung
        { name: "Samsung Galaxy A13", price: 95000, img: "telephones/eee.jpeg" },
        { name: "Samsung Galaxy S21", price: 250000, img: "telephones/fff.jpeg" },
        { name: "Samsung Galaxy Note 20", price: 300000, img: "telephones/ggg.jpeg" },
        { name: "Samsung Galaxy Z Flip", price: 450000, img: "telephones/hhh.jpeg" },
        // 4 iPhone
        { name: "iPhone 12", price: 400000, img: "telephones/iii.jpeg" },
        { name: "iPhone 13", price: 500000, img: "telephones/jjj.jpeg" },
        { name: "iPhone 14", price: 600000, img: "telephones/kkk.jpeg" },
        { name: "iPhone 15", price: 750000, img: "telephones/lll.jpeg" }
      ];

      telephones.forEach(tel => {
        document.write(`
          <div class="col-4 col-md-4 col-lg-3 mb-4">
            <div class="product-card">
              <img src="${tel.img}" alt="${tel.name}">
              <div class="p-3">
                <h6>${tel.name}</h6>
                <p class="price">${tel.price} FCFA</p>
                <button class="btn btn-success w-100"
                    onclick='addToCart(${JSON.stringify(tel)})'>
                    Ajouter au panier
                </button>
              </div>
            </div>
          </div>
        `);
      });
      </script>

    </div>
  </div>
</div>
<!-- ================= FIN SECTION TELEPHONES ================= -->
 <!-- ================= SECTION CHARGEURS ================= -->
<div id="section-chargeurs">
<div class="container mt-5 mb-5">

    <h3 class="fw-bold text-center text-dark mb-4">
        üîå CHARGEURS DE T√âL√âPHONES
    </h3>

    <div class="row">

        <script>
        const chargeurs = [
            { name: "Chargeur USB Standard", price: 3000, img: "telephones/aaaa.jpeg" },
            { name: "Chargeur Rapide", price: 5000, img: "telephones/bbbb.jpeg" },
            { name: "Chargeur Samsung", price: 4500, img: "telephones/cccc.jpeg" },
            { name: "Chargeur iPhone", price: 6000, img: "telephones/dddd.jpeg" },
            { name: "Chargeur Double Port", price: 5500, img: "telephones/eeee.jpeg" },
            { name: "Chargeur Voiture", price: 4000, img: "telephones/ffff.jpeg" }
        ];

        chargeurs.forEach(chargeur => {
            document.write(`
                <div class="col-4 col-md-4 col-lg-3 mb-4">
                    <div class="product-card">
                        <img src="${chargeur.img}" alt="${chargeur.name}">
                        <div class="p-3">
                            <h6>${chargeur.name}</h6>
                            <p class="price">${chargeur.price} FCFA</p>
                            <button class="btn btn-success w-100"
                                onclick='addToCart(${JSON.stringify(chargeur)})'>
                                Ajouter au panier
                            </button>
                        </div>
                    </div>
                </div>
            `);
        });
        </script>

    </div>
</div>
</div>

</div>
 <!-- BOUTON FLOTTANT -->
  <div class="floating-menu">
      <button id="menuBtn" class="btn btn-warning rounded-circle">
          ‚ò∞
      </button>
      <div id="menuOptions" class="menu-options">
          <a href="#section-savon">üßº Savon</a>
          <a href="#section-montres">‚åö Montre</a>
          <a href="#section-vetements">üëï V√™tements</a>
          <a href="#section-telephones">üì± T√©l√©phones</a>
          <a href="#section-chargeurs"> üîå chargeurs</a>
      </div>
  </div>

  <style>
    /* BOUTON FLOTTANT */
    .floating-menu {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1000;
    }

    #menuBtn {
      width: 60px;
      height: 60px;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .menu-options {
      display: none;
      flex-direction: column;
      margin-bottom: 10px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      overflow: hidden;
    }

    .menu-options a {
      padding: 10px 20px;
      text-decoration: none;
      color: black;
      border-bottom: 1px solid #ddd;
    }

    .menu-options a:last-child {
      border-bottom: none;
    }

    .menu-options a:hover {
      background-color: #ffc107;
      color: white;
    }
  </style>

  <script>
    const menuBtn = document.getElementById("menuBtn");
    const menuOptions = document.getElementById("menuOptions");

    menuBtn.addEventListener("click", () => {
      menuOptions.style.display = menuOptions.style.display === "flex" ? "none" : "flex";
    });

    // Fermer le menu quand on clique sur une section
    document.querySelectorAll(".menu-options a").forEach(link => {
      link.addEventListener("click", () => {
        menuOptions.style.display = "none";
      });
    });
  </script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
